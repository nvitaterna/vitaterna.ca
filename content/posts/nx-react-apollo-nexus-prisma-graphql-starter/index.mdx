---
title: Nx React Apollo Nexus Prisma GraphQL Starter
date: 2021-05-25
description: ''
tags:
  - graphql
  - react
  - nx
  - monorepos
  - prisma
  - nexus
  - apollo
---

import Link from '../../../src/components/link';

To start off, I'd like to credit <Link to="https://blog.nrwl.io/using-apollo-graphql-with-react-in-an-nx-workspace-99db8d69cebe">this walkthrough</Link> for giving me a quick rundown on setting up an application in Nx:

> Nx is a set of extensible dev tools for monorepos. Because of the robust support for a diverse ecosystem of JavaScript development, it enables you to build your entire full-stack application in a single repo. This allows you to share code and interfaces between your frontend and backend and acts as a multiplier on your development velocity.

This will follow a similar structure, while making changes to the workflow to play nice with <Link to="https://nexusjs.org/">Nexus</Link> and <Link to="https://www.prisma.io/">Prisma</Link>. In this article, you will build a basic 'Todo' GraphQL API that is consumed by a React frontend. This will all be contained in a Nx workspace in a single directory.

Just as a heads-up - my environment is Ubuntu 20.04.1 in WSL2, and I'll be using node 14.17.0 and yarn 1.22.10. You can use `todo-starter` as the project name - though you can use whatever name you'd like.

## Create a new workspace

Start by creating an Nx workspace:

```bash noLineNumbers
npx create-nx-workspace todo-starter --package-manager yarn
```

You'll be prompted with some questions, answer them as follows:

```
? What to create in the new workspace
> react-express     [a workspace with a full stack application (React + Express)]

? Application name
> todo-app

? Default stylesheet format
> SASS(.scss)  [ http://sass-lang.com   ]

? Use Nx Cloud? (It's free and doesn't require registration.)
> No
```

After these selections have been made, the Nx CLI will creat your workspace. Enter your workspace directory:

```bash noLineNumbers
cd todo-starter
```

For the rest of the walkthrough, you will consider this as the "root" directory.

## Prisma

You will need to install many dependencies as you go. Let's start with installing and setting up Prisma.

### Setting up the Prisma CLI

First, you'll add the `prisma` cli. This will only be needed for development, so install it as a development dependency via the `-D` flag:

```bash noLineNumbers
yarn add prisma -D
```

Use the `prisma init` command to initialize your prisma schema:

```bash noLineNumbers
yarn prisma init
```

This will create a new directory called `prisma` in your root which contains a `schema.prisma` file. It will also create a `.env` file in your root directory. 

Create a new library with Nx so you can start organizing your project::

```bash noLineNumbers
yarn nx generate @nrwl/node:library prisma-client
```

This will create a new library in `libs/prisma-client`. Note that you will also have an `api-interfaces` library - you'll remove that later, just ignore it for now.

Move the `prisma` folder into the `prisma-client` library:

```bash noLineNumbers
mv prisma libs/prisma-client
```

Edit the `schema.prisma` file to look like this:

```prisma:title=libs/prisma-client/prisma/schema.prisma {5,11}
// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "./generated"
}

```

We will use `sqlite` as our datasource, to avoid the need to spin up a new database. We'll also be setting the output to a relative folder in the library. Usually this is put in your `node_modules` folder. By putting it into this library's source code, it allows Nx to track when changes are made (more on how this works later).